services:
    # ==========================================
    # API Service
    # ==========================================

    Itrblueboost\Service\ApiService:
        class: Itrblueboost\Service\ApiService
        public: true

    # ==========================================
    # Configuration - Services
    # ==========================================

    # Form Type - sans autowire car utilise parent
    Itrblueboost\Form\ConfigurationType:
        class: Itrblueboost\Form\ConfigurationType
        parent: 'form.type.translatable.aware'
        public: true
        tags:
            - { name: form.type }

    # Data Configuration
    itrblueboost.form.configuration_data_configuration:
        class: Itrblueboost\Form\ConfigurationDataConfiguration
        arguments:
            - '@Itrblueboost\Service\ApiService'
        public: true

    # Form Data Provider
    itrblueboost.form.configuration_form_data_provider:
        class: Itrblueboost\Form\ConfigurationFormDataProvider
        arguments:
            - '@itrblueboost.form.configuration_data_configuration'
        public: true

    # Form Handler
    itrblueboost.form.configuration_form_handler:
        class: PrestaShop\PrestaShop\Core\Form\Handler
        arguments:
            - '@form.factory'
            - '@prestashop.core.hook.dispatcher'
            - '@itrblueboost.form.configuration_form_data_provider'
            - 'Itrblueboost\Form\ConfigurationType'
            - 'ItrblueboostConfiguration'
        public: true

    # Controller Configuration
    Itrblueboost\Controller\Admin\ConfigurationController:
        class: Itrblueboost\Controller\Admin\ConfigurationController
        arguments:
            - '@itrblueboost.form.configuration_form_handler'
            - '@Itrblueboost\Service\ApiService'
        tags:
            - { name: controller.service_arguments }
        calls:
            - [setContainer, ['@service_container']]
        public: true

    # ==========================================
    # Compatibility - Services
    # ==========================================

    # Form Type Compatibility
    Itrblueboost\Form\CompatibilityType:
        class: Itrblueboost\Form\CompatibilityType
        parent: 'form.type.translatable.aware'
        public: true
        tags:
            - { name: form.type }

    # Data Configuration Compatibility
    itrblueboost.form.compatibility_data_configuration:
        class: Itrblueboost\Form\CompatibilityDataConfiguration
        public: true

    # Form Data Provider Compatibility
    itrblueboost.form.compatibility_form_data_provider:
        class: Itrblueboost\Form\CompatibilityFormDataProvider
        arguments:
            - '@itrblueboost.form.compatibility_data_configuration'
        public: true

    # Form Handler Compatibility
    itrblueboost.form.compatibility_form_handler:
        class: PrestaShop\PrestaShop\Core\Form\Handler
        arguments:
            - '@form.factory'
            - '@prestashop.core.hook.dispatcher'
            - '@itrblueboost.form.compatibility_form_data_provider'
            - 'Itrblueboost\Form\CompatibilityType'
            - 'ItrblueboostCompatibility'
        public: true

    # Controller Compatibility
    Itrblueboost\Controller\Admin\CompatibilityController:
        class: Itrblueboost\Controller\Admin\CompatibilityController
        arguments:
            - '@itrblueboost.form.compatibility_form_handler'
        tags:
            - { name: controller.service_arguments }
        calls:
            - [setContainer, ['@service_container']]
        public: true

    # ==========================================
    # FAQ Produit - Services
    # ==========================================

    # Form Type FAQ
    Itrblueboost\Form\ProductFaqType:
        class: Itrblueboost\Form\ProductFaqType
        parent: 'form.type.translatable.aware'
        public: true
        tags:
            - { name: form.type }

    # Grid Definition Factory
    itrblueboost.grid.definition.factory.product_faq:
        class: Itrblueboost\Grid\Definition\Factory\ProductFaqGridDefinitionFactory
        parent: 'prestashop.core.grid.definition.factory.abstract_grid_definition'
        public: true

    # Grid Query Builder
    itrblueboost.grid.query_builder.product_faq:
        class: Itrblueboost\Grid\Query\ProductFaqQueryBuilder
        arguments:
            - '@doctrine.dbal.default_connection'
            - '%database_prefix%'
            - '@prestashop.core.query.doctrine_search_criteria_applicator'
            - '@=service("prestashop.adapter.legacy.context").getContext().language.id'
            - '@=service("prestashop.adapter.legacy.context").getContext().shop.id'
        public: true

    # Grid Data Factory (Doctrine)
    itrblueboost.grid.data_factory.product_faq_doctrine:
        class: PrestaShop\PrestaShop\Core\Grid\Data\Factory\DoctrineGridDataFactory
        arguments:
            - '@itrblueboost.grid.query_builder.product_faq'
            - '@prestashop.core.hook.dispatcher'
            - '@prestashop.core.grid.query.doctrine_query_parser'
            - 'itrblueboost_product_faq'
        public: true

    # Grid Data Factory (Decorator)
    itrblueboost.grid.data_factory.product_faq:
        class: Itrblueboost\Grid\Data\Factory\ProductFaqGridDataFactory
        arguments:
            - '@itrblueboost.grid.data_factory.product_faq_doctrine'
        public: true

    # Grid Factory
    itrblueboost.grid.factory.product_faq:
        class: PrestaShop\PrestaShop\Core\Grid\GridFactory
        arguments:
            - '@itrblueboost.grid.definition.factory.product_faq'
            - '@itrblueboost.grid.data_factory.product_faq'
            - '@prestashop.core.grid.filter.form_factory'
            - '@prestashop.core.hook.dispatcher'
        public: true

    # Controller FAQ
    Itrblueboost\Controller\Admin\ProductFaqController:
        class: Itrblueboost\Controller\Admin\ProductFaqController
        tags:
            - { name: controller.service_arguments }
        calls:
            - [setContainer, ['@service_container']]
        public: true

    # ==========================================
    # Image IA Produit - Services
    # ==========================================

    # Controller Image IA
    Itrblueboost\Controller\Admin\ProductImageController:
        class: Itrblueboost\Controller\Admin\ProductImageController
        tags:
            - { name: controller.service_arguments }
        calls:
            - [setContainer, ['@service_container']]
        public: true

    # ==========================================
    # FAQ Catégorie - Services
    # ==========================================

    # Form Type FAQ Catégorie
    Itrblueboost\Form\CategoryFaqType:
        class: Itrblueboost\Form\CategoryFaqType
        parent: 'form.type.translatable.aware'
        public: true
        tags:
            - { name: form.type }

    # Grid Definition Factory
    itrblueboost.grid.definition.factory.category_faq:
        class: Itrblueboost\Grid\Definition\Factory\CategoryFaqGridDefinitionFactory
        parent: 'prestashop.core.grid.definition.factory.abstract_grid_definition'
        public: true

    # Grid Query Builder
    itrblueboost.grid.query_builder.category_faq:
        class: Itrblueboost\Grid\Query\CategoryFaqQueryBuilder
        arguments:
            - '@doctrine.dbal.default_connection'
            - '%database_prefix%'
            - '@prestashop.core.query.doctrine_search_criteria_applicator'
            - '@=service("prestashop.adapter.legacy.context").getContext().language.id'
            - '@=service("prestashop.adapter.legacy.context").getContext().shop.id'
        public: true

    # Grid Data Factory (Doctrine)
    itrblueboost.grid.data_factory.category_faq_doctrine:
        class: PrestaShop\PrestaShop\Core\Grid\Data\Factory\DoctrineGridDataFactory
        arguments:
            - '@itrblueboost.grid.query_builder.category_faq'
            - '@prestashop.core.hook.dispatcher'
            - '@prestashop.core.grid.query.doctrine_query_parser'
            - 'itrblueboost_category_faq'
        public: true

    # Grid Data Factory (Decorator)
    itrblueboost.grid.data_factory.category_faq:
        class: Itrblueboost\Grid\Data\Factory\CategoryFaqGridDataFactory
        arguments:
            - '@itrblueboost.grid.data_factory.category_faq_doctrine'
        public: true

    # Grid Factory
    itrblueboost.grid.factory.category_faq:
        class: PrestaShop\PrestaShop\Core\Grid\GridFactory
        arguments:
            - '@itrblueboost.grid.definition.factory.category_faq'
            - '@itrblueboost.grid.data_factory.category_faq'
            - '@prestashop.core.grid.filter.form_factory'
            - '@prestashop.core.hook.dispatcher'
        public: true

    # Controller FAQ Catégorie
    Itrblueboost\Controller\Admin\CategoryFaqController:
        class: Itrblueboost\Controller\Admin\CategoryFaqController
        tags:
            - { name: controller.service_arguments }
        calls:
            - [setContainer, ['@service_container']]
        public: true

    # ==========================================
    # API Logger Service
    # ==========================================

    Itrblueboost\Service\ApiLogger:
        class: Itrblueboost\Service\ApiLogger
        public: true

    # Controller API Logs
    Itrblueboost\Controller\Admin\ApiLogController:
        class: Itrblueboost\Controller\Admin\ApiLogController
        tags:
            - { name: controller.service_arguments }
        calls:
            - [setContainer, ['@service_container']]
        public: true

    # ==========================================
    # Generated Images & FAQs Controllers
    # ==========================================

    # Controller Generated Images
    Itrblueboost\Controller\Admin\GeneratedImagesController:
        class: Itrblueboost\Controller\Admin\GeneratedImagesController
        tags:
            - { name: controller.service_arguments }
        calls:
            - [setContainer, ['@service_container']]
        public: true

    # Controller Generated FAQs (deprecated - use AllProductFaqsController/AllCategoryFaqsController)
    Itrblueboost\Controller\Admin\GeneratedFaqsController:
        class: Itrblueboost\Controller\Admin\GeneratedFaqsController
        tags:
            - { name: controller.service_arguments }
        calls:
            - [setContainer, ['@service_container']]
        public: true

    # Controller All Product FAQs
    Itrblueboost\Controller\Admin\AllProductFaqsController:
        class: Itrblueboost\Controller\Admin\AllProductFaqsController
        tags:
            - { name: controller.service_arguments }
        calls:
            - [setContainer, ['@service_container']]
        public: true

    # Controller All Category FAQs
    Itrblueboost\Controller\Admin\AllCategoryFaqsController:
        class: Itrblueboost\Controller\Admin\AllCategoryFaqsController
        tags:
            - { name: controller.service_arguments }
        calls:
            - [setContainer, ['@service_container']]
        public: true

    # ==========================================
    # Product Content - Services
    # ==========================================

    # Form Type Content
    Itrblueboost\Form\ProductContentType:
        class: Itrblueboost\Form\ProductContentType
        parent: 'form.type.translatable.aware'
        public: true
        tags:
            - { name: form.type }

    # Grid Definition Factory
    itrblueboost.grid.definition.factory.product_content:
        class: Itrblueboost\Grid\Definition\Factory\ProductContentGridDefinitionFactory
        parent: 'prestashop.core.grid.definition.factory.abstract_grid_definition'
        public: true

    # Grid Query Builder
    itrblueboost.grid.query_builder.product_content:
        class: Itrblueboost\Grid\Query\ProductContentQueryBuilder
        arguments:
            - '@doctrine.dbal.default_connection'
            - '%database_prefix%'
            - '@prestashop.core.query.doctrine_search_criteria_applicator'
            - '@=service("prestashop.adapter.legacy.context").getContext().language.id'
            - '@=service("prestashop.adapter.legacy.context").getContext().shop.id'
        public: true

    # Grid Data Factory (Doctrine)
    itrblueboost.grid.data_factory.product_content_doctrine:
        class: PrestaShop\PrestaShop\Core\Grid\Data\Factory\DoctrineGridDataFactory
        arguments:
            - '@itrblueboost.grid.query_builder.product_content'
            - '@prestashop.core.hook.dispatcher'
            - '@prestashop.core.grid.query.doctrine_query_parser'
            - 'itrblueboost_product_content'
        public: true

    # Grid Data Factory (Decorator)
    itrblueboost.grid.data_factory.product_content:
        class: Itrblueboost\Grid\Data\Factory\ProductContentGridDataFactory
        arguments:
            - '@itrblueboost.grid.data_factory.product_content_doctrine'
        public: true

    # Grid Factory
    itrblueboost.grid.factory.product_content:
        class: PrestaShop\PrestaShop\Core\Grid\GridFactory
        arguments:
            - '@itrblueboost.grid.definition.factory.product_content'
            - '@itrblueboost.grid.data_factory.product_content'
            - '@prestashop.core.grid.filter.form_factory'
            - '@prestashop.core.hook.dispatcher'
        public: true

    # Controller Product Content
    Itrblueboost\Controller\Admin\ProductContentController:
        class: Itrblueboost\Controller\Admin\ProductContentController
        tags:
            - { name: controller.service_arguments }
        calls:
            - [setContainer, ['@service_container']]
        public: true

    # ==========================================
    # Symfony Commands
    # ==========================================

    Itrblueboost\Command\ProcessGenerationJobCommand:
        class: Itrblueboost\Command\ProcessGenerationJobCommand
        tags:
            - { name: console.command }
        public: true

    # Controller All Product Contents
    Itrblueboost\Controller\Admin\AllProductContentsController:
        class: Itrblueboost\Controller\Admin\AllProductContentsController
        tags:
            - { name: controller.service_arguments }
        calls:
            - [setContainer, ['@service_container']]
        public: true
